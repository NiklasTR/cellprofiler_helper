---
title: "Using dcphelper to create Metadata files"
author: "Niklas Rindtorff"
date: "10/25/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

**This vignette is legacy code**

# Introduction 

This vignette runs you through the necessary steps to create metadata .csv files which are necessary for calling distributed cell profiler. 

# Maintaining the package

The *dcphelper* package is an independent github controlled repo that I located in the *rapid* mother-directory. The ready-to-install *tar.gz* files are located outside the *dcphelper* directory and thus can be fetched from the *rapid* repo. 

```{r, eval = FALSE}
#navigate into "rapid" directory
git fetch origin
```

After fetching the most recent version, install the package by running. 

```{r, eval = FALSE}
R CMD INSTALL dcphelper_0.0.0.XXXX.tar.gz
```


# Pipelines

## Flatfield correction

This is the first metadata file to be created. It is supposed to be located at the root of the _...Measurment_ raw data directory containing both the _Images_ and _Index_ directory. 


```{r, eval = FALSE}
#Navigate to the XY/Image directory you want to process - this is not ideal, but it gets the job done
R -q -e "library(dcphelper); dcphelper::create_flatfield_metadata()"
R -q -e "library(dcphelper); dcphelper::create_brightfield_metadata_new()"
R -q -e "library(dcphelper); dcphelper::check_image_set()"
R -q -e "library(dcphelper); dcphelper::create_phase_metadata()"

#Now copy the metadata file to its destined location, for example: 
cp ~/metadata/metadata.csv ~/ascstore_access/000012045003__2018-09-28T20_42_19-Measurement_5/

```

